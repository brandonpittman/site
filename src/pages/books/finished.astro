---
import { getCollection } from "astro:content";

import Layout from "@layouts/Layout.astro";

import "core-js/proposals/array-grouping-v2";

let books = await getCollection("books");

let isFinished = (b) => !!b.data.completed;

let finished = books
  .filter(isFinished)
  .sort((a, b) => (a.data.completed > b.data.completed ? -1 : 1));

let grouped = Object.groupBy(finished, (f) => f.data.completed.getFullYear());
---

<Layout title="Finished - Brandon Pittman">
  <main class="region wrapper prose flow">
    <h1>Finished</h1>
    <ul role="list" class="flow">
      {
        Object.entries(grouped)
          .reverse()
          .map(([year, groupedBooks]) => (
            <li class="flow flow-m">
              <h2>{year}</h2>
              <ul
                role="list"
                class="flow"
                style="--flow-space: var(--space-3xs)"
              >
                {groupedBooks.map((book) => (
                  <li class="flow-3xs">
                    <a href={`/books/${book.slug}`}>{book.data.title}</a>
                  </li>
                ))}
              </ul>
            </li>
          ))
      }

      {
        /*
        Hellenistic Philosophy (A.A. Long) Tranquility by Tuesday (Laura Vanderkam)
        A Rulebook for Arguments (Anthony Weston) The Practicing Stoic (Ward Farnsworth)
        Effective Notetaking (Dr. Fiona McPherson) How to Make Notes and Write (Dan
        Allosso) Epictetus: A Stoic and Socratic Guide to Life (A. A. Long) Discourses,
        Fragments, Handbook (Epictetus & Robin Hard) Letters on Ethics (Seneca) Tiny
        Habits: The Small Changes That Change Everything (BJ Fogg) Hero of Two Worlds:
        The Marquis de Lafayette in the Age of Revolution (Mike Duncan) Heartburn (Nora
        Ephron) Consider This (Chuck Palahniuk) On Writing Well (William Zinsser) Fight
        Club 2 (Chuck Palahniuk) Nausea (Jean-Paul Sartre) The Socratic Method (Ward
        Farnsworth) Several short sentences about writing (Verlyn Klinkenborg) Messy
        (Tim Harford) 4,000 Weeks (Oliver Burkeman) The Antidote (Oliver Burkeman)
        HELP! (Oliver Burkeman) Courage is Calling (Ryan Holiday) Lives of the Stoics
        (Ryan Holiday) Anger, Mercy, Revenge (Seneca) Meditations (Marcus Aurelius
        and Robin Waterfield) Write Useful Books (Rob Fitzpatrick) At the Existentialist
        Cafe (Sarah Bakewell) Essentialism (Greg McKeowan) Effortless (Greg McKeowan)
        Man's Search for Meaning (Victor Frankl) Two Meals a Day (Mark Sisson) Phenomenology:
        The Basics (Dan Zahavi) Getting Real (Jason Fried) It Doesn't Have to Be Crazy
        at Work (Jason Fried) Shape Up (Ryan Singer) Discourses (Epictetus) That One
        Should Disdain Hardships (Musonius Rufus) Atomic Design (Brad Frost) The Storm
        Before the Storm: The Beginning of the End of the Roman Republic (Mike Duncan)
        A Clash of Kings (George R.R. Martin) A Dance with Dragons (George R.R. Martin)
        A Feast for Crows (George R.R. Martin) A Game of Thrones (George R. R. Martin)
        A Stir of Echoes (Richard Matheson) A Storm of Swords (George R.R. Martin)
        Agile Web Development (Dave Thomas) Automate with Grunt (Brian P. Hogan) Batman:
        Arkham Asylum Batman: Hush Batman: The City of the Owls Batman: The Court of
        the Owls Batman: The Dark Knight Returns Batman: The Long Halloween (J. Loeb)
        Batman: Year One Build Awesome Command-Line Applications in Ruby 2 (David Copeland)
        Choke (Chuck Palahniuk) CoffeeScript (Trevor Burnham) Confident Ruby (Avdi
        Grimm) Creating Flow with OmniFocus (Kuorosh Dini) Diary (Chuck Palahniuk)
        Do Androids Dream of Electric Sheep? (Philip K. Dick) El Club Dumas (Arturo
        Perez-Revert) Exceptional Ruby (Avdi Grimm) Fight Club (Chuck Palahniuk) From
        Bash to Z Shell (Oliver Kiddle) Fugitives and Refugees (Chuck Palahniuk) Getting
        Things Done (David Allen) Getting Things Done (David Allen) Good Math (Mark
        C. Chu-Carroll) HTML5 and CSS3 (Brian P. Hogan) Haunted (Chuck Palahniuk) Hunting
        Deer for Food (Health) In Fifty Years We'll All Be Chicks (Adam Carolla) Invisible
        Monsters (Chuck Palahniuk) Learn AppleScript (Hamish Sanderson) Learning Unix
        for OS X Mountain Lion (Dave Taylor) Letters to Steve: Inside the E-mail Inbox
        of Apple's Steve Jobs (Mark Milian) Lullaby (Chuck Palahniuk) Mass Effect:
        Ascension (Drew Karpyshyn) Mass Effect: Deception (Some Hack) Mass Effect:
        Retribution (Drew Karpyshyn) Mass Effect: Revelation (Drew Karpyshyn) Meditations
        (Marcus Aurelius and Gregory Hayes) Metaprogramming Ruby (Paola Perrotta) Not
        Taco Bell Material (Adam Carolla) Practical Object-Oriented Design in Ruby
        (Sandi Metz) Practical Vim (Drew Neil) Pragmatic Guide to JavaScript (Christophe
        Porteneuve) Programming Elixir (Dave Thomas) Programming Ruby 1.9 & 2.0 (Dave
        Thomas) Pygmy (Chuck Palahniuk) Rant (Chuck Palahniuk) Snuff (Chuck Palahniuk)
        Steve Jobs (Walter Isaacson) Survivor (Chuck Palahniuk) Take Control of BBEdit
        (Glenn Fleishman) Take Control of the Terminal (Joe Kissel) Text Processing
        with Ruby (Rob Miller) The 4-Hour Body: An Uncommon Guide to Rapid Fat-Loss,
        Incredible Sex, and Becoming Superhuman (Timothy Ferris) The Brewmaster's Table
        (Garrett Oliver) The Cucumber Book (Matt Wynne) The Life Changing Magic of
        Tidying Up (Marie Kondo) The Paleo Manifesto (Health) The Pragmatic Programmer
        (Dave Thomas) The Primal Blueprint (Mark Sisson) The Primal Connection (Mark
        Sisson) The Rspec Book (David Chelimsky) Workflow Mastery (Kuorosh Dini) Zombie
        Spaceship Wasteland (Patton Oswald) ember-cli 101 (Adolfo Builes) tmux (Brian
        P. Hogan)
        */
      }
    </ul>
  </main>
</Layout>

<style>
  main {
    flex: 1 1 0%;
  }

  li > a {
    --gutter: var(--space-xs);
  }

  /* details > ul {
    margin-block-start: 1rem;
  }

  summary {
    @media (min-width: 640px) {
      inline-size: 11rem;
      text-align: end;
    }
  } */
</style>
